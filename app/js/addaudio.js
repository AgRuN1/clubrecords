!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){$(".audio-test__control_play i").removeClass("fa-play").addClass("fa-pause"),$(".audio-test__control_play").removeClass("audio-test__control_play").addClass("audio-test__control_pause"),$(".audio-test__control_pause").on("click",a),p.playMusic()}function a(){$(".audio-test__control_pause i").removeClass("fa-pause").addClass("fa-play"),$(".audio-test__control_pause").removeClass("audio-test__control_pause").addClass("audio-test__control_play"),$(".audio-test__control_play").on("click",i),p.pauseMusic()}function r(){p.endPlay(),$(".audio-test__control_pause i").removeClass("fa-pause").addClass("fa-play"),$(".audio-test__control_pause").removeClass("audio-test__control_pause").addClass("audio-test__control_play"),$(".audio-test__control_play").on("click",i)}function s(t){$(".error").append('<aside class="alert alert-danger alert-error"><strong>Что-то пошло не так...</strong></aside>')}function u(){$(".audio-test__name").val(h.name),$(".audio-test").css({display:"block"}),$(".audio-upload__btn").css({display:"none"}),p=new f.default($(".progress-audio"),$(".audio-test__duration"),$(".bar-audio"),h,$(".audio-test__current-time"))}function d(t){var e=Math.round(t.target.duration);h.duration=e}function l(t){if($(".audio-test").css({display:"none"}),$(".alert-error").remove(),0!=t.files.length)if(/^audio\//.test(t.files[0].type)){var e=new FileReader;e.onload=function(t){var e=new Audio;e.onerror=s,e.onloadedmetadata=d,e.onloadeddata=u,e.onended=r,e.src=t.target.result,h.audio=e};var o=t.files[0].name;o=o.replace(/.\w+$/,""),h.name=o,h.type=t.files[0].type,e.readAsDataURL(t.files[0])}else $(".error").append('<aside class="alert alert-danger alert-error"><strong>Неподдерживаемый тип файла</strong></aside>')}var c=o(10),f=n(c);o(1);var p,h={name:"Unknown name",type:"Unknown type",duration:"0",file:"",author:""};$(function(){$(".audio-upload__file").on("change",function(t){l(t.target)}),$(".audio-upload__btn").on("click",function(){$(".audio-upload__file").click()}),$(".audio-test__cancel").on("click",function(){$(".audio-test").css({display:"none"}),$(".audio-upload__btn").css({display:"block"}),a(),$(".bar-audio").css({width:"0%"})}),$(".audio-test__control_play").on("click",i),document.querySelector(".audio-upload__btn").addEventListener("dragenter",function(){$(".audio-upload__btn").text("Киньте сюда файл"),$(".audio-upload__btn").css({fontSize:"1.5em"})}),document.querySelector(".audio-upload__btn").addEventListener("dragover",function(t){t.preventDefault()}),document.querySelector(".audio-upload__btn").addEventListener("dragleave",function(){$(".audio-upload__btn").text("Выбрать файл"),$(".audio-upload__btn").css({fontSize:"1em"})}),document.querySelector(".audio-upload__btn").addEventListener("drop",function(t){t.preventDefault(),$(".audio-upload__btn").text("Выбрать файл"),$(".audio-upload__btn").css({fontSize:"1em"}),l(t.dataTransfer)})})},function(t,e,o){var n=o(2);"string"==typeof n&&(n=[[t.id,n,""]]);o(4)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,o){e=t.exports=o(3)(),e.push([t.id,".audio-upload__file{display:none!important}.audio-test{display:none}.audio-test__audio{paddint:10px;font-size:1.4em}.progress-audio{height:4px;width:100%;float:right;position:relative;background-color:#999;padding:0}.bar-audio{margin:0;height:100%;position:absolute;background-color:#2ecc71}.audio-test__audio{width:200px}.audio-test__control{float:left}.audio-test__duration{float:right}.audio-test__current-time{position:absolute;bottom:150%;background-color:#2ecc71;color:#fff;font-size:.5em;display:none;opacity:.7;padding:3px}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var o=this[e];o[2]?t.push("@media "+o[2]+"{"+o[1]+"}"):t.push(o[1])}return t.join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&n[r[0]]||(o&&!r[2]?r[2]=o:o&&(r[2]="("+r[2]+") and ("+o+")"),t.push(r))}},t}},function(t,e,o){function n(t,e){for(var o=0;o<t.length;o++){var n=t[o],i=p[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(d(n.parts[a],e))}else{for(var r=[],a=0;a<n.parts.length;a++)r.push(d(n.parts[a],e));p[n.id]={id:n.id,refs:1,parts:r}}}}function i(t){for(var e=[],o={},n=0;n<t.length;n++){var i=t[n],a=i[0],r=i[1],s=i[2],u=i[3],d={css:r,media:s,sourceMap:u};o[a]?o[a].parts.push(d):e.push(o[a]={id:a,parts:[d]})}return e}function a(t,e){var o=m(),n=y[y.length-1];if("top"===t.insertAt)n?n.nextSibling?o.insertBefore(e,n.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",a(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",a(t,e),e}function d(t,e){var o,n,i;if(e.singleton){var a=g++;o=v||(v=s(e)),n=l.bind(null,o,a,!1),i=l.bind(null,o,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=u(e),n=f.bind(null,o),i=function(){r(o),o.href&&URL.revokeObjectURL(o.href)}):(o=s(e),n=c.bind(null,o),i=function(){r(o)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}function l(t,e,o,n){var i=o?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var a=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}function c(t,e){var o=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}function f(t,e){var o=e.css,n=e.sourceMap;n&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}var p={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},_=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=_()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var o=i(t);return n(o,e),function(t){for(var a=[],r=0;r<o.length;r++){var s=o[r],u=p[s.id];u.refs--,a.push(u)}if(t){var d=i(t);n(d,e)}for(var r=0;r<a.length;r++){var u=a[r];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var b=function(){var t=[];return function(e,o){return t[e]=o,t.filter(Boolean).join("\n")}}()},,,,,,function(t,e){"use strict";function o(t,e,o,n,i){var a=this;this.progress=t,this.music=n,this.duration=e,this.bar=o,this.currentTime=i,e.text(this.getUserTime(n.duration)),t.on("click",function(t){var e=t.offsetX,r=a.getTime(e);a.music.audio.currentTime=r;var s=r/n.duration*100;o.css({width:s+"%"}),i.css({display:"none"})}),t.on("mouseenter",function(t){var e=t.offsetX,o=e-i.width()/2,n=a.getTime(e);i.text(a.getUserTime(n)),i.css({left:o+"px"}),i.css({display:"block"})}),t.on("mouseleave",function(){i.css({display:"none"})}),t.on("mousemove",function(e){var o=e.offsetX,n=o-i.width()/2,r=(t.width(),a.getTime(o));i.text(a.getUserTime(r)),i.css({left:n+"px"})})}Object.defineProperty(e,"__esModule",{value:!0});var n={playMusic:function(){this.timer=setInterval(this.showTime.bind(this),1e3),this.music.audio.play(),this.duration.text(this.getUserTime(this.music.audio.currentTime))},showTime:function(){var t=this.music.duration-this.music.audio.currentTime,e=this.music.audio.currentTime/this.music.duration*100;this.duration.text(this.getUserTime(t)),this.bar.css({width:e+"%"})},pauseMusic:function(){clearInterval(this.timer),this.music.audio.pause()},getTime:function(t){var e=this.progress.width(),o=t*this.music.audio.duration/e;return o},getUserTime:function(t){t=Math.round(t);var e=Math.round(t/60),o=t%60;return o<10&&(o="0"+o.toString()),e+":"+o},endPlay:function(){clearInterval(this.timer),this.music.audio.currentTime=0,this.duration.text(this.getUserTime(this.music.duration)),this.bar.css({width:"0%"})}};o.prototype=n,e.default=o}]);
//# sourceMappingURL=addaudio.js.map